{# templates/sorties/sorties_par_campus.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Sorties par Campus{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/app.css') }}">
{% endblock %}

{% block body %}
    {# Afficher le formulaire de recherche des sorties #}
    <h1>Sorties par Campus</h1>
        {{form_start(sortieform) }}
        {{ form_widget(sortieform) }}
        {{ form_end(sortieform) }}

    {# Afficher le tableau des villes avec une barre de défilement verticale #}
    <div style="overflow-y: auto; max-height: 400px;">
    {# Afficher le tableau de sortie ici #}
    <table class="tableau-sorties">
    <tr>
        <th>Nom de la sortie</th>
        <th>Date de la sortie</th>
        <th>Clôture</th>
        <th>Inscrits/places</th>
        <th>Etat</th>
        <th>Inscrit</th>
        <th>Organisateur</th>
        <th>Actions</th>
    </tr>


    {% for sortie in sorties %}
        <tr>
            <td>{{ sortie.titre }}</td>
            <td>{{ sortie.date|date('d/m/Y H:i') }}</td>
            <td>{{ sortie.dateLimiteInscription|date('d/m/Y H:i') }}</td>
            <td>{{ sortie.users.count }} / {{ sortie.nombreDePlaces }}</td>
            <td>{{ sortie.etat.libelle }}</td>
            <td> {% if sortie.users.contains(app.user) %}
                    {% if sortie.date > 'now'|date('Y-m-d H:i:s') %}
                        {% if sortie.users.contains(app.user) %}
                            <span class="icon">&#10004;</span>
                        {% endif %}
                    {% else %}
                        <span class="icon">&#10006;</span>
                    {% endif %}
                {% endif %}
            </td>
            <td>{#{{ sortie.organisateur.pseudo }}#}</td>
            <td>

                <a href="{{ path('actions_inscription', {'id': sortie.id}) }}" title="S'inscrire">S'inscrire</a>
                {% if sortie.users.contains(app.user) and sortie.date > 'now'|date('Y-m-d H:i:s') %}
                    <a href="{{ path('actions_desinscription', {'id': sortie.id}) }}">Se désinscrire</a>
                {% endif %}
                <a href="{{ path('actions_details', {'id': sortie.id}) }}" title="{{ sortie.titre }}">Afficher</a>
                {#{% if sortie.organisateur == app.user %}
                        <a href="{{ path('sorties_modifier', {'id': sortie.id}) }}">Modifier la sortie</a>
                        <a href="{{ path('sorties_annuler', {'id': sortie.id}) }}">Annuler la sortie</a>
                    {% endif %}#}

            </td>
        </tr>

    {% endfor %}
    </table>
    </div>
{# bouton #}
   <a href="{{ path('sorties_ajouter') }}" class="button button-create">Créer une sortie</a>
{% endblock %}